<h4><strong>1. Introduction</strong></h4><p>In this lesson, we're going to learn the flow of password reset in Laravel authentication. There are a couple of actions that need to take place:</p><ul><li><p>You request a password reset</p></li><li><p>You enter your email. If the email you entered is valid, a password reset link will be sent to your email.</p></li><li><p>You Access the reset link</p></li><li><p>If the link that you accessed is valid, you can enter your new password.</p></li></ul><p>Just in case you forgot your password when you enter your credentials in the <strong>Login</strong> form, you can hit the <strong>Forgot Your Password</strong> link.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-50-07-6b1e8d97036806a4304932ca8392134e.png"></figure><p>If you hit that link it'll take you to the <strong>Reset Password</strong> form. In that form, you can request a reset by entering the email that you entered when registering a new user.</p><p>Once you hit the <strong>Send Password Reset Link</strong> button, under the hood it will find in the Users table the email that you provided. If the email you've entered did not found in the database, you'll get a validation error message like this.</p><p><br></p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-50-37-6c06ee9b118d985c903be93fed5a1c1d.png"></figure><p>But, if the email that you entered was valid (found in the database), you'll get <code>Swift_TransportException</code> error like this.</p><p><br></p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-50-59-843dd7f919f2b10ebec3cf571d939e83.png"></figure><p>If you see the error more details, you'll realize that Laravel tried to send a message to your email.&nbsp; Since you didn't configure the email settings, that's why you got that error.</p><p>But If you see the <code>password_resets</code> table, you'll find a new record inserted.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-51-54-b68ac71bde2eb7b9d3c06711f7f5d1be.png"></figure><h4>2. Fixing Swift_TransportException error</h4><p>The simple way to fix that error is to use <code>log</code> instead of <code>smtp</code>. Let's open the <code>.env</code> file. Then change the <code>MAIL_MAILER</code> from <code>smtp</code> to <code>log</code>.</p><pre class="prettyprint linenums">MAIL_MAILER=log</pre><p>Also you need to adjust the <code>APP_NAME</code> to your project's url. This will make sure you that you'll get the proper password reset link on the sent email.</p><pre class="prettyprint linenums">APP_URL=http://contact-app.test</pre><p>If you're using php built-in server you need to restart the server in order to laravel take effect of those changes. Or you can also clear the config cache by using this command:</p><pre class="prettyprint linenums">php artisan config:clear</pre><p>Now if go back to <strong>Reset Password</strong> form,&nbsp; enter your valid email then hit the <strong>Send Password Reset Link</strong> you will get a success message telling you that the password reset link has been sent to your email.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-53-14-c3b4fdfc68fa62132baac4f69ca4f5c8.png"></figure><p>Ideally you will go to your inbox, open the email, then hit the password reset link to actually reset your password. But since we used <code>log</code>, what we need to do is to navigate to <code>storage/logs</code> folder. Then open the last <code>.log</code> file. You can then simply find the reset password link, then copy to the clipboard.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-54-13-11bbad7e450334a4d24fb6ad71d825fb.png"></figure><p>If you take a look at the link it basically contains a token (original token) and an email.</p><pre class="prettyprint linenums">.../15ee6fba300f929e80426d7b8bd78d10e858dcc26aeadf18b4da0cff14e6bae0?email=johndoe%40test.com</pre><p>This mechanism is almost similar when you login an account. You provided email and original password. Once submitted, Laravel will encrypt the original password into a hash. Then match the email and hashed password with database record.</p><p>This way will ensure that only the right users can reset their password. Also the reset link only valid for <code>60</code> minutes. If for some reasons you want to increase or decrease the expire time, you can open <code>auth.php</code> file inside <code>config</code> folder. Then set the <code>expire</code> in <code>password</code> section with any number you prefer.</p><pre class="prettyprint linenums">'passwords' =&gt; [
&nbsp; 'users' =&gt; [
&nbsp; &nbsp; 'provider' =&gt; 'users',
&nbsp; &nbsp; 'table' =&gt; 'password_resets',
&nbsp; &nbsp; 'expire' =&gt; 120,
&nbsp; &nbsp; 'throttle' =&gt; 60,
&nbsp; ],
],</pre><p>Now if you enter the link in your browser you will get a <strong>Confirm Reset Password</strong> form like this.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-55-44-ece399c24878cef6d94c15d82fd0f2a6.png"></figure><p>In this form the email input will populated automatically with email from the query string. You can then enter new password in the password and confirm password inputs, then hit <strong>Reset Password</strong> button to proceed. Once it done you'll be taken to <code>dashboard</code> page.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-56-16-a6b16c7f82837dbd55f190f63183b6a8.png"></figure><p>If you&nbsp; take a look at <code>password_resets</code> table again, the record now gone.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/2020-01-11_06-56-47-f20de501455771fec661eb68a6d5d6db.png"></figure>